{"ast":null,"code":"import _classCallCheck from \"/Users/jisung/Documents/ACCESS LABS/art-exhibition-app-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jisung/Documents/ACCESS LABS/art-exhibition-app-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jisung/Documents/ACCESS LABS/art-exhibition-app-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jisung/Documents/ACCESS LABS/art-exhibition-app-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jisung/Documents/ACCESS LABS/art-exhibition-app-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jisung/Documents/ACCESS LABS/art-exhibition-app-frontend/src/Containers/ExhibitionProfile.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { showExhibitionInfo as _showExhibitionInfo, postToSavedExhibition as _postToSavedExhibition, getImpressions as _getImpressions, getSavedExhibitions as _getSavedExhibitions, getUsers as _getUsers, deleteSavedExhibition as _deleteSavedExhibition } from '../Redux/actions.js';\nimport ImpressionForm from '../Components/ImpressionForm';\nimport ImpressionCard from '../Components/ImpressionCard';\n\nvar ExhibitionProfile =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ExhibitionProfile, _Component);\n\n  function ExhibitionProfile() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ExhibitionProfile);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ExhibitionProfile)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      user_id: _this.props.loggedInUser.id,\n      exhibition_id: _this.props.selectedExhibition.id,\n      clicked: false\n    };\n\n    _this.clickHandler = function () {\n      var savedExhibitionObjArr;\n\n      if (_this.props.usersSavedExhibitions) {\n        savedExhibitionObjArr = _this.props.usersSavedExhibitions.map(function (exObj1) {\n          return _this.props.exhibitions.find(function (exObj2) {\n            return exObj2.id === exObj1.exhibition_id;\n          });\n        });\n      } // savedExhibitionObjArr = savedExhibitionObjArr.filter(exObj => {\n      //   return exObj !== undefined\n      // })\n\n\n      var savedExObj;\n\n      if (!savedExhibitionObjArr.includes(_this.props.exhibition)) {\n        _this.props.postToSavedExhibition({\n          user_id: _this.state.user_id,\n          exhibition_id: _this.props.exhibition.id\n        });\n      } else {\n        if (_this.props.usersSavedExhibitions) {\n          savedExObj = _this.props.usersSavedExhibitions.find(function (exhib) {\n            return exhib.exhibition_id === _this.props.exhibition.id;\n          });\n\n          if (savedExObj.id) {\n            _this.props.deleteSavedExhibition(savedExObj);\n          }\n        }\n      }\n\n      if (!!_this.props.loggedInUser.id === false) {\n        alert(\"Please sign in or register.\");\n      }\n    };\n\n    _this.impressionHandler = function () {\n      _this.setState({\n        clicked: !_this.state.clicked\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(ExhibitionProfile, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.getImpressions();\n      this.props.getSavedExhibitions();\n      this.props.showExhibitionInfo(this.props.exhibition);\n      this.props.getUsers();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var exhibitionImpressions;\n\n      if (this.props.allImpressions.length > 0) {\n        exhibitionImpressions = this.props.allImpressions.filter(function (impObj) {\n          return impObj.exhibition_id === _this2.props.selectedExhibition.id;\n        });\n      }\n\n      var impressionCards;\n\n      if (exhibitionImpressions) {\n        impressionCards = exhibitionImpressions.map(function (impObj) {\n          return React.createElement(ImpressionCard, {\n            key: impObj.id,\n            impressionObj: impObj,\n            users: _this2.props.allUsers,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 80\n            },\n            __self: this\n          });\n        });\n      } // let imageArr\n      // if (this.props.exhibition.length > 0) {\n      //   imageArr = this.props.exhibition.image.map(imgObj => {\n      //     return imgObj['src']\n      //   })\n      // }\n      // imageArr = imageArr.filter(img => img !== undefined)\n      // console.log(this.props.exhibition.image.split(/ {\"src\"=>\"|\",|\"=>\"|\"width\"/)[7])\n\n\n      var exhibitionName;\n\n      if (this.props.exhibition) {\n        exhibitionName = this.props.exhibition.name.split(' ').map(function (str) {\n          if (str !== 'Exhibition') {\n            return str + \" \";\n          }\n        });\n      }\n\n      var savedExhibitionObjArr;\n\n      if (this.props.usersSavedExhibitions) {\n        savedExhibitionObjArr = this.props.usersSavedExhibitions.map(function (exObj1) {\n          return _this2.props.exhibitions.find(function (exObj2) {\n            return exObj2.id === exObj1.exhibition_id;\n          });\n        });\n      }\n\n      var isInterested = savedExhibitionObjArr.includes(this.props.exhibition);\n      return React.createElement(\"div\", {\n        className: \"exhibition-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"exhibition-profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"exhibition-heading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, exhibitionName), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, \"_______________\"), React.createElement(\"div\", {\n        className: \"heading-columns\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \"DAYS REMAINING: \", this.props.exhibition.days_remaining)), React.createElement(\"div\", {\n        className: \"button-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.clickHandler,\n        className: \"interested-button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"INTERESTED \", !!isInterested && this.props.loggedInUser.id ? \"✓\" : null)))), React.createElement(\"div\", {\n        className: \"exhibition-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"exhibition-column-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, \"VENUE:\"), React.createElement(\"p\", {\n        className: \"exhibition-detail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, this.props.exhibition.venue_name), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, \"ADDRESS:\"), React.createElement(\"p\", {\n        className: \"exhibition-detail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, this.props.exhibition.venue_address), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, \"PHONE:\"), React.createElement(\"p\", {\n        className: \"exhibition-detail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, this.props.exhibition.venue_phone), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, \"VENUE ACCESS:\"), React.createElement(\"p\", {\n        className: \"exhibition-detail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, this.props.exhibition.venue_access), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \"NEIGHBORHOOD:\"), React.createElement(\"p\", {\n        className: \"exhibition-detail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, this.props.exhibition.venue_area), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \"OPENING HOUR:\"), React.createElement(\"p\", {\n        className: \"exhibition-detail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, this.props.exhibition.venue_openinghour < 12 ? \"\".concat(this.props.exhibition.venue_openinghour, \" AM\") : this.props.exhibition.venue_openinghour > 12 ? \"\".concat(this.props.exhibition.venue_openinghour - 12, \" PM\") : '12 PM'), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"CLOSING HOUR:\"), React.createElement(\"p\", {\n        className: \"exhibition-detail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, this.props.exhibition.venue_closinghour < 12 ? \"\".concat(this.props.exhibition.venue_closinghour, \" AM\") : \"\".concat(this.props.exhibition.venue_closinghour - 12, \" PM\")), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, \"PRICE:\"), React.createElement(\"p\", {\n        className: \"exhibition-detail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, this.props.exhibition.price), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, \"PERMANENT EVENT(?):\"), React.createElement(\"p\", {\n        className: \"exhibition-detail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, this.props.exhibition.permanent_event === 0 ? \"YES\" : \"NO\"), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, \"MEDIA:\"), React.createElement(\"p\", {\n        className: \"exhibition-detail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, this.props.exhibition.media), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, \"START DATE:\"), React.createElement(\"p\", {\n        className: \"exhibition-detail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, this.props.exhibition.start_date), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, \"END DATE:\"), React.createElement(\"p\", {\n        className: \"exhibition-detail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, this.props.exhibition.end_date)), React.createElement(\"div\", {\n        className: \"exhibition-description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, \"DESCRIPTION:\"), React.createElement(\"p\", {\n        className: \"exhibition-detail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, this.props.exhibition.description)))), React.createElement(\"div\", {\n        className: \"impressions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"first-row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, \"IMPRESSIONS\")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.impressionHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, \"LEAVE IMPRESSION\"))), React.createElement(\"div\", {\n        className: \"second-row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, impressionCards), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, this.state.clicked === true ? React.createElement(ImpressionForm, {\n        exhibition: this.props.exhibition,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }) : null))));\n    }\n  }]);\n\n  return ExhibitionProfile;\n}(Component); // <img src={this.props.exhibition.image.split(/ {\"src\"=>\"|\",|\"=>\"|\"width\"/)[7]} alt=\"\" className='exhibition-image'/>\n\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    exhibitions: state.exhibitions,\n    selectedExhibition: state.selectedExhibition,\n    loggedInUser: state.loggedInUser,\n    allImpressions: state.allImpressions,\n    usersSavedExhibitions: state.usersSavedExhibitions,\n    allUsers: state.allUsers\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    showExhibitionInfo: function showExhibitionInfo(exObj) {\n      return dispatch(_showExhibitionInfo(exObj));\n    },\n    postToSavedExhibition: function postToSavedExhibition(obj) {\n      return dispatch(_postToSavedExhibition(obj));\n    },\n    getImpressions: function getImpressions() {\n      return dispatch(_getImpressions());\n    },\n    getSavedExhibitions: function getSavedExhibitions() {\n      return dispatch(_getSavedExhibitions());\n    },\n    getUsers: function getUsers() {\n      return dispatch(_getUsers());\n    },\n    deleteSavedExhibition: function deleteSavedExhibition(exhibObj) {\n      return dispatch(_deleteSavedExhibition(exhibObj));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ExhibitionProfile);","map":{"version":3,"sources":["/Users/jisung/Documents/ACCESS LABS/art-exhibition-app-frontend/src/Containers/ExhibitionProfile.js"],"names":["React","Component","connect","showExhibitionInfo","postToSavedExhibition","getImpressions","getSavedExhibitions","getUsers","deleteSavedExhibition","ImpressionForm","ImpressionCard","ExhibitionProfile","state","user_id","props","loggedInUser","id","exhibition_id","selectedExhibition","clicked","clickHandler","savedExhibitionObjArr","usersSavedExhibitions","map","exObj1","exhibitions","find","exObj2","savedExObj","includes","exhibition","exhib","alert","impressionHandler","setState","exhibitionImpressions","allImpressions","length","filter","impObj","impressionCards","allUsers","exhibitionName","name","split","str","isInterested","days_remaining","venue_name","venue_address","venue_phone","venue_access","venue_area","venue_openinghour","venue_closinghour","price","permanent_event","media","start_date","end_date","description","mapStateToProps","mapDispatchToProps","dispatch","exObj","obj","exhibObj"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport { connect } from 'react-redux'\nimport {\n  showExhibitionInfo,\n  postToSavedExhibition,\n  getImpressions,\n  getSavedExhibitions,\n  getUsers,\n  deleteSavedExhibition\n} from '../Redux/actions.js'\nimport ImpressionForm from '../Components/ImpressionForm'\nimport ImpressionCard from '../Components/ImpressionCard'\n\nclass ExhibitionProfile extends Component {\n  componentDidMount(){\n    this.props.getImpressions()\n    this.props.getSavedExhibitions()\n    this.props.showExhibitionInfo(this.props.exhibition)\n    this.props.getUsers()\n  }\n\n  state = {\n    user_id: this.props.loggedInUser.id,\n    exhibition_id: this.props.selectedExhibition.id,\n    clicked: false\n  }\n\n  clickHandler = () => {\n    let savedExhibitionObjArr\n    if (this.props.usersSavedExhibitions) {\n      savedExhibitionObjArr = this.props.usersSavedExhibitions.map(exObj1 => {\n        return this.props.exhibitions.find(exObj2 => {\n          return exObj2.id === exObj1.exhibition_id\n        })\n      })\n    }\n\n    // savedExhibitionObjArr = savedExhibitionObjArr.filter(exObj => {\n    //   return exObj !== undefined\n    // })\n\n    let savedExObj\n    if (!savedExhibitionObjArr.includes(this.props.exhibition)) {\n      this.props.postToSavedExhibition({user_id: this.state.user_id, exhibition_id: this.props.exhibition.id});\n    } else {\n      if (this.props.usersSavedExhibitions) {\n        savedExObj = this.props.usersSavedExhibitions.find(exhib => {\n          return exhib.exhibition_id === this.props.exhibition.id\n        })\n        if (savedExObj.id) {\n          this.props.deleteSavedExhibition(savedExObj)\n        }\n      }\n    }\n\n    if (!!this.props.loggedInUser.id === false) {\n      alert(\"Please sign in or register.\")\n    }\n  }\n\n  impressionHandler = () => {\n    this.setState({\n      clicked: !this.state.clicked\n    })\n  }\n\n\n  render() {\n\n    let exhibitionImpressions\n    if (this.props.allImpressions.length > 0) {\n      exhibitionImpressions = this.props.allImpressions.filter(impObj => {\n        return impObj.exhibition_id === this.props.selectedExhibition.id\n      })\n    }\n\n    let impressionCards\n    if (exhibitionImpressions) {\n      impressionCards = exhibitionImpressions.map(impObj => {\n        return <ImpressionCard key={impObj.id} impressionObj={impObj} users={this.props.allUsers}/>\n      })\n    }\n\n    // let imageArr\n    // if (this.props.exhibition.length > 0) {\n    //   imageArr = this.props.exhibition.image.map(imgObj => {\n    //     return imgObj['src']\n    //   })\n    // }\n    // imageArr = imageArr.filter(img => img !== undefined)\n\n    // console.log(this.props.exhibition.image.split(/ {\"src\"=>\"|\",|\"=>\"|\"width\"/)[7])\n\n\n    let exhibitionName\n    if (this.props.exhibition) {\n      exhibitionName = this.props.exhibition.name.split(' ').map(str => {\n        if (str !== 'Exhibition') {\n          return str + \" \"\n        }\n      })\n    }\n\n    let savedExhibitionObjArr\n    if (this.props.usersSavedExhibitions) {\n      savedExhibitionObjArr = this.props.usersSavedExhibitions.map(exObj1 => {\n        return this.props.exhibitions.find(exObj2 => {\n          return exObj2.id === exObj1.exhibition_id\n        })\n      })\n    }\n\n    let isInterested = savedExhibitionObjArr.includes(this.props.exhibition)\n\n\n    return (\n    <div className=\"exhibition-content\">\n      <div className='exhibition-profile'>\n\n        <div className='exhibition-heading'>\n            <h1>{exhibitionName}</h1>\n            <h1>_______________</h1>\n            <div className='heading-columns'>\n              <div>\n                <h4>DAYS REMAINING: {this.props.exhibition.days_remaining}</h4>\n              </div>\n              <div className='button-container'>\n\n                  <button onClick={this.clickHandler} className='interested-button'>\n                    INTERESTED { !!isInterested && this.props.loggedInUser.id ? \"✓\" : null}\n                  </button>\n\n              </div>\n            </div>\n        </div>\n\n        <div className='exhibition-info'>\n            <div className='exhibition-column-1'>\n                <label>VENUE:</label>\n                <p className='exhibition-detail'>{this.props.exhibition.venue_name}</p>\n                <label>ADDRESS:</label>\n                <p className='exhibition-detail'>{this.props.exhibition.venue_address}</p>\n                <label>PHONE:</label>\n                <p className='exhibition-detail'>{this.props.exhibition.venue_phone}</p>\n                <label>VENUE ACCESS:</label>\n                <p className='exhibition-detail'>{this.props.exhibition.venue_access}</p>\n                <label>NEIGHBORHOOD:</label>\n                <p className='exhibition-detail'>{this.props.exhibition.venue_area}</p>\n                <label>OPENING HOUR:</label>\n                <p className='exhibition-detail'>{\n                  this.props.exhibition.venue_openinghour < 12\n                  ? `${this.props.exhibition.venue_openinghour} AM` :\n                  this.props.exhibition.venue_openinghour > 12\n                  ? `${this.props.exhibition.venue_openinghour - 12} PM`\n                  : '12 PM'\n                }</p>\n                <label>CLOSING HOUR:</label>\n                <p className='exhibition-detail'>{\n                  this.props.exhibition.venue_closinghour < 12\n                  ? `${this.props.exhibition.venue_closinghour} AM`\n                  : `${this.props.exhibition.venue_closinghour - 12} PM`\n                }</p>\n                <label>PRICE:</label>\n                <p className='exhibition-detail'>{this.props.exhibition.price}</p>\n                <label>PERMANENT EVENT(?):</label>\n                <p className='exhibition-detail'>{this.props.exhibition.permanent_event === 0 ? \"YES\" : \"NO\"}</p>\n                <label>MEDIA:</label>\n                <p className='exhibition-detail'>{this.props.exhibition.media}</p>\n                <label>START DATE:</label>\n                <p className='exhibition-detail'>{this.props.exhibition.start_date}</p>\n                <label>END DATE:</label>\n                <p className='exhibition-detail'>{this.props.exhibition.end_date}</p>\n            </div>\n\n            <div className='exhibition-description'>\n                <label>DESCRIPTION:</label>\n                <p className='exhibition-detail'>{this.props.exhibition.description}</p>\n            </div>\n\n        </div>\n      </div>\n\n\n        <div className='impressions'>\n\n          <div className=\"first-row\">\n            <div>\n              <h2>IMPRESSIONS</h2>\n            </div>\n\n            <div>\n              <button onClick={this.impressionHandler}>LEAVE IMPRESSION</button>\n            </div>\n          </div>\n\n          <div className=\"second-row\">\n            <div>\n              {impressionCards}\n            </div>\n\n            <div>\n              {\n                this.state.clicked === true\n                ? <ImpressionForm exhibition={this.props.exhibition}/>\n                : null\n              }\n            </div>\n          </div>\n\n        </div>\n\n      </div>\n    )\n  }\n}\n\n// <img src={this.props.exhibition.image.split(/ {\"src\"=>\"|\",|\"=>\"|\"width\"/)[7]} alt=\"\" className='exhibition-image'/>\n\n\nconst mapStateToProps = (state) => {\n  return {\n    exhibitions: state.exhibitions,\n    selectedExhibition: state.selectedExhibition,\n    loggedInUser: state.loggedInUser,\n    allImpressions: state.allImpressions,\n    usersSavedExhibitions: state.usersSavedExhibitions,\n    allUsers: state.allUsers\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    showExhibitionInfo: (exObj) => dispatch(showExhibitionInfo(exObj)),\n    postToSavedExhibition: (obj) => dispatch(postToSavedExhibition(obj)),\n    getImpressions: () => dispatch(getImpressions()),\n    getSavedExhibitions: () => dispatch(getSavedExhibitions()),\n    getUsers: () => dispatch(getUsers()),\n    deleteSavedExhibition: (exhibObj) => dispatch(deleteSavedExhibition(exhibObj))\n  }\n}\n\n\nexport default connect( mapStateToProps, mapDispatchToProps )(ExhibitionProfile)\n"]},"metadata":{},"sourceType":"module"}